@if(isLoading()) {
  <app-skeleton-loader></app-skeleton-loader>
} @else {
  <div class="flex flex-col h-screen">
    <!-- Header -->
    <header class="sticky top-0 z-10 glass-card p-4">
      <div class="container mx-auto flex justify-between items-center">
        <div class="flex items-center gap-4">
          <svg class="w-8 h-8 text-violet-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.572L16.5 21.75l-.398-1.178a3.375 3.375 0 00-2.456-2.456L12.5 18l1.178-.398a3.375 3.375 0 002.456-2.456L16.5 14.25l.398 1.178a3.375 3.375 0 002.456 2.456L20.5 18l-1.178.398a3.375 3.375 0 00-2.424 2.424z" />
          </svg>
          <div class="text-xl font-bold text-white">CIS Dashboard</div>
        </div>

        <nav>
            <ul class="flex items-center gap-6">
              <li><a class="font-bold text-white text-sm" href="#">Home</a></li>
              <li><a class="text-gray-400 hover:text-white transition-colors text-sm" href="#">About</a></li>
              <li><a class="text-gray-400 hover:text-white transition-colors text-sm" href="#">Profile</a></li>
            </ul>
        </nav>

        <button (click)="logout.emit()" class="px-4 py-2 text-sm font-medium text-white rounded-lg gradient-border-button">
          Logout
        </button>
      </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto p-4 md:p-8">
      <div class="container mx-auto">
        <h1 class="text-3xl font-bold text-white mb-8">Dashboard</h1>
        <!-- Metrics Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
          @for(metric of metrics; track metric.title; let i = $index) {
            <div class="glass-card rounded-xl p-6 animate-fade-in-up" [style.animation-delay]="i * 100 + 'ms'">
              <p class="text-sm text-gray-400">{{ metric.title }}</p>
              <p class="text-3xl font-bold text-white mt-2">{{ metric.value }}</p>
              @if(metric.change) {
                <p class="text-xs mt-2" [class.text-green-400]="metric.isPositive" [class.text-red-400]="!metric.isPositive">
                  {{ metric.change }} vs last month
                </p>
              }
              @if(metric.title === 'API Credits Used') {
                <div class="w-full bg-white/10 rounded-full h-2.5 mt-3">
                  <div class="bg-gradient-to-r from-violet-500 to-fuchsia-500 h-2.5 rounded-full" [style.width]="metric.value"></div>
                </div>
              }
            </div>
          }
        </div>

        <!-- Content Grid -->
        <h2 class="text-2xl font-bold text-white mb-6">Generated Content</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          @for(post of posts; track post.title; let i = $index) {
            <div class="glass-card rounded-xl overflow-hidden group animate-fade-in-up" [style.animation-delay]="(i + metrics.length) * 80 + 'ms'">
              <img [src]="post.imageUrl" alt="{{ post.title }}" width="400" height="300" class="w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300">
              <div class="p-4">
                <h3 class="font-semibold text-lg text-white">{{ post.title }}</h3>
                <span class="text-xs font-medium px-2.5 py-1 mt-2 inline-block rounded-full border" [class]="getStatusColor(post.status)">
                  {{ post.status }}
                </span>
              </div>
            </div>
          }
        </div>
      </div>
    </main>

    <footer class="p-4">
      <div class="container mx-auto text-center text-sm text-gray-500">
        &copy; 2024 Content Intelligence Suite. All rights reserved.
      </div>
    </footer>
  </div>
}
